<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
    table {
        width: 100%;
    }

    td img {
        max-width: 90%;
        border-radius: 10%;
    }

    button {
        width: 100%;
        border: none;
        border-radius: 5px;
        background-color: #007bff;
        padding: 5px;
        color: aliceblue;
    }

    .ct img {
        max-width: 30%;

    }

    .ct {
        padding: 5px;
        border: 1px solid black;
        border-radius: 5px;
    }

    .nul img {
        max-width: 90%;
        border-radius: 10%;
    }
</style>

<body>



</body>

<script>
    function ler() {
        let arquivo = 'apks.json';
        fetch(arquivo)
            .then(response => response.json())
            .then(data => {
                apks = data;
                console.log(apks)
            })
            .catch(error => {
                console.error('Erro ao carregar o arquivo JSON ' + arquivo, error);
            });


    }
    var apks = [];
    ler();

    // while(apks.length < 10){}

    const qs = window.location.search;
    const p = new URLSearchParams(qs);
    const nomeApk = p.get('apk');

    setTimeout(() => {
        apks.forEach(element => {

            if (element.nome === nomeApk) {
                document.body.innerHTML = '' +
                    '<table>' +
                    '<tr>' +
                    '<td rowspan="2" style="width:21%;border:none">' +
                    '<img src="' + element.icone + '">' +
                    '</td>' +
                    '<td style="border:none;font-size:20px"><b>' + element.nome + '</b></td>' +
                    '</tr>' +
                    '<tr><td style="font-size:12px; border:none"><i>Autor: BresoDEV</i></td></tr>' +
                    '<tr><td colspan="2"><hr></td></tr></table>' +
                    '<table><tr><th style="font-weight:normal;font-size:13px">Tamanho</th>' +
                    '<th style="font-weight:normal;font-size:13px">Downloads</th></tr><tr>' +
                    '<th>0.9MB</th>' +
                    '<th>' + element.downloads + '</th>' +
                    '</tr></table><hr><br><a href="' + element.apk + '"><button>Download</button></a><br><hr>' +
                    '<table style="padding:4px"><tr><td><b><h3>Sobre:</h3></b></td></tr><tr>' +
                    '<td>' + element.descricao + '</td>' +
                    '</tr></table><br><div class="ct"><center>' +
                    '<img src="' + element.img1 + '">' +
                    '<img src="' + element.img2 + '">' +
                    '<img src="' + element.img3 + '">' +
                    '</div></center><br><br>' +
                    '';
            }

        });

        //outros apks
        var rnd1 = Math.floor((Math.random() * apks.length) / 2);
        var rnd2 = Math.floor((Math.random() * apks.length) / 2);
        var rnd3 = Math.floor((Math.random() * apks.length) / 2);

        if (rnd1 === rnd2) {
            rnd2 = Math.floor((Math.random() * apks.length) / 2);
            if (rnd1 === rnd2) {
                rnd2 = Math.floor((Math.random() * apks.length) / 2);
            }
            else {
                if (rnd1 === rnd3 || rnd2 === rnd3) {
                    rnd3 = Math.floor((Math.random() * apks.length) / 2);
                    if (rnd1 === rnd3 || rnd2 === rnd3) {
                        rnd3 = Math.floor((Math.random() * apks.length) / 2);
                    }
                }
            }
        }

        console.log(rnd1);
        console.log(rnd2);
        console.log(rnd3);

        document.body.innerHTML += '' +
            '<div class="ct"><center><b>Outros apks:</b><br>' +
            '<table class="nul">' +
            '<tr>' +
            '<td> <a href="download.html?apk=' + apks[rnd1].nome + '"><img src="' + apks[rnd1].icone + '" style="width:100%"> </a> </td>' +
            '<td> <a href="download.html?apk=' + apks[rnd2].nome + '"><img src="' + apks[rnd2].icone + '" style="width:100%"> </a> </td>' +
            '<td> <a href="download.html?apk=' + apks[rnd3].nome + '"><img src="' + apks[rnd3].icone + '" style="width:100%"> </a> </td>' +
            '</tr>' +
            '<tr>' +
            '<td>' + apks[rnd1].nome + '</td>' +
            '<td>' + apks[rnd2].nome + '</td>' +
            '<td>' + apks[rnd3].nome + '</td>' +
            '</tr></table></div></center>' +
            '' +
            '' +
            '' +
            '';

    }, 1000);





</script>

</html>